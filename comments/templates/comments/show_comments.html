{% load comments %}
{% load mptt_tags %}

{% get_comment_list for object as comments %}
{% if comments %}
    <ul>
{% recursetree comments %}
    <li>

    <a name="c{{ node.id }}"></a>
    <div>{{ node.comment }}</div>
    <div>{{ node.user_name }}</div>
    <div>{{ node.submit_date|timesince }} ago</div>
    <div><a href="{{ object.get_absolute_url }}#c{{ node.id }}">#</a></div>
    <h1> {{ node.level }}</h1>

    {% render_comment_form for object %}

    {# recursion! children of a given comment #}

    {% if not node.is_leaf_node %}
        <ul>
        {{ children }}
        </ul>
    {% endif %}
    </li>
{% endrecursetree %}
    </ul>
{% endif %}

{% render_comment_form for object %}