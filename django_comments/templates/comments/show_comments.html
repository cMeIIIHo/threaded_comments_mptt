{% load comments %}
{% load mptt_tags %}
{% load static %}
<link rel="stylesheet" href="{% static 'django_comments/css/show_comments.css' %}">
    <script type="text/javascript" src="{% static 'django_comments/js/show_comments.js' %}"></script>

{% get_comment_list for object as comments %}
{% if comments %}
    <ul>
        {% recursetree comments %}
            <li>

                <a name="c{{ node.id }}"></a>
                <h2>{{ node.comment }} (comment level = {{ node.level }})</h2>
                <div>{{ node.user_name }}, {{ node.submit_date|timesince }} ago</div>
                {#    <div><a href="{{ object.get_absolute_url }}#c{{ node.id }}">#</a></div>#}
                <button type="button" class="btn btn-primary" data-js-node_id="{{ node.id }}"
                        onclick="get_answer_form(this)">Ответить
                </button>


                {% render_comment_form for object %}

                {# recursion! children of a given comment #}

                {% if not node.is_leaf_node %}
                    <ul>
                        {{ children }}
                    </ul>
                {% endif %}
            </li>
        {% endrecursetree %}
    </ul>
{% endif %}

{% render_comment_form for object %}